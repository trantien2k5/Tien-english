<div class="page-header">
    <h2 class="page-header__title">Luyá»‡n Nghe TÆ°Æ¡ng TÃ¡c ğŸ§</h2>
    <p class="page-header__desc">Nghe há»™i thoáº¡i & Tráº£ lá»i cÃ¢u há»i</p>
</div>

<div class="card dashboard-card">
    <div class="db-header">
        <div>
            <h3 class="card-title">ğŸ“… Káº¿ hoáº¡ch hÃ´m nay</h3>
            <p class="db-subtitle">HoÃ n thÃ nh Ä‘á»ƒ duy trÃ¬ Streak ğŸ”¥</p>
        </div>
        <div class="db-progress">
            <span id="db-count">0/3</span>
        </div>
    </div>
    <div class="db-steps">
        <div class="db-step done">âœ… 1. Daily Vocab (5p)</div>
        <div class="db-step active">â³ 2. Luyá»‡n nghe AI (3p)</div>
        <div class="db-step">ğŸ”’ 3. Speaking Challenge</div>
    </div>
</div>

<div class="mode-grid">
    <div class="mode-card active" onclick="window.listenMode('smart')">
        <div class="mc-icon">ğŸš€</div>
        <h4>Lá»™ trÃ¬nh AI</h4>
        <p>AI tá»± chá»n bÃ i phÃ¹ há»£p nháº¥t</p>
    </div>
    <div class="mode-card" onclick="window.listenMode('custom')">
        <div class="mc-icon">âœï¸</div>
        <h4>Tá»± chá»n</h4>
        <p>Báº¡n thÃ­ch chá»§ Ä‘á» gÃ¬?</p>
    </div>
    <div class="mode-card" onclick="window.listenMode('review')">
        <div class="mc-icon">ğŸ”</div>
        <h4>Ã”n táº­p lá»—i</h4>
        <p>Luyá»‡n láº¡i cÃ¢u nghe sai</p>
    </div>
</div>

<div id="custom-setup-ui" class="card fade-in" style="display:none; margin-top:20px; border-left:4px solid var(--color-primary)">
    <h3 class="card-title">ğŸ›ï¸ Thiáº¿t láº­p bÃ i nghe</h3>
    
    <label class="section-label">Chá»§ Ä‘á» (Topic)</label>
    <div class="chip-grid" id="topic-chips">
        <div class="chip active" data-val="Daily Routine">ğŸ“… ThÃ³i quen</div>
        <div class="chip" data-val="Travel">âœˆï¸ Du lá»‹ch</div>
        <div class="chip" data-val="Work">ğŸ’¼ CÃ´ng viá»‡c</div>
        <div class="chip" data-val="IELTS Part 1">ğŸ“ IELTS</div>
    </div>
    <div class="input-group mt-3">
        <input type="text" id="listen-topic" class="form-input" value="Daily Routine" placeholder="Hoáº·c nháº­p chá»§ Ä‘á» báº¥t ká»³...">
    </div>

    <label class="section-label">TrÃ¬nh Ä‘á»™</label>
    <select id="listen-level" class="form-input">
        <option value="A1">A1 - SÆ¡ cáº¥p</option>
        <option value="A2" selected>A2 - CÆ¡ báº£n</option>
        <option value="B1">B1 - Trung cáº¥p</option>
        <option value="B2">B2 - NÃ¢ng cao</option>
    </select>

    <button id="btn-gen-listen" class="btn btn--primary mt-3">âœ¨ Táº¡o bÃ i nghe ngay</button>
</div>

<div id="recent-area" style="margin-bottom: 20px;">
    <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:10px">
        <h4 style="color:var(--color-text-muted)">â³ Gáº§n Ä‘Ã¢y</h4>
        <button class="btn-text" id="btn-view-all-history">Xem táº¥t cáº£</button>
    </div>
    <div id="recent-list" class="recent-list">
        <p style="font-size:0.9rem; color:#999">ChÆ°a cÃ³ bÃ i há»c nÃ o.</p>
    </div>
</div>

<div id="listen-area" class="card player-card" style="display:none;">
    <div class="player-header">
        <div class="player-info">
            <span class="badge-live">LIVE</span>
            <h3 id="player-title">Há»™i thoáº¡i AI</h3>
        </div>
        <button id="btn-focus-mode" class="btn-icon-small" title="Cháº¿ Ä‘á»™ táº­p trung (áº¨n háº¿t)">
            ğŸ¯
        </button>
    </div>

    <div class="audio-visualizer">
        <div class="bar"></div><div class="bar"></div><div class="bar"></div>
        <div class="bar"></div><div class="bar"></div>
    </div>

    <div class="player-controls">
        <button class="btn-control sm" id="btn-rewind-5" title="LÃ¹i 5s">âª</button>
        <button id="btn-play" class="btn-control lg play">â–¶ï¸</button>
        <button class="btn-control sm" id="btn-forward-5" title="Tá»›i 5s">â©</button>
    </div>

    <div class="player-footer">
        <div class="speed-selector">
            <span class="speed-opt" data-val="0.7">0.7x</span>
            <span class="speed-opt active" data-val="1">1.0x</span>
            <span class="speed-opt" data-val="1.2">1.2x</span>
        </div>
        <div id="audio-status" class="status-text">Sáºµn sÃ ng nghe...</div>
    </div>

    <div class="transcript-section">
        <div class="ts-header" id="btn-toggle-script">
            <span>ğŸ“œ Transcript (VÄƒn báº£n)</span>
            <i class="fas fa-chevron-down"></i>
        </div>
        <div id="script-content" class="ts-content" style="display:none;">
            </div>
    </div>
</div>

<div id="quiz-area" class="card" style="display:none;">
    <h3 style="margin-bottom: 15px; border-left: 4px solid var(--color-primary); padding-left: 10px;">
        ğŸ“ BÃ i táº­p hiá»ƒu (Comprehension)
    </h3>
    <div id="questions-container">
        </div>
</div>

<div id="vocab-extract-area" class="card vocab-section" style="display:none;">
    <div class="section-header">
        <h3>ğŸ’ Tá»« vá»±ng quan trá»ng</h3>
        <span class="badge-info">AI Picked</span>
    </div>
    <div id="vocab-extract-list" class="vocab-grid">
        </div>
</div>

<div id="listen-loader" style="text-align: center; margin-top: 30px; display: none;">
    <div class="loader"></div>
    <p style="margin-top: 10px; color: var(--color-text-muted);">AI Ä‘ang soáº¡n bÃ i nghe & cÃ¢u há»i...</p>
</div>